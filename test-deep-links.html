<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Link Test - Wittwizz Calculator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .test-link {
            display: inline-block;
            margin: 10px 5px;
            padding: 8px 16px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
        }
        .test-link:hover {
            background: #2563eb;
        }
        .test-link:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        .status.success { background: #d1fae5; color: #065f46; }
        .status.info { background: #dbeafe; color: #1e40af; }
        .status.warning { background: #fef3c7; color: #92400e; }
        .status.error { background: #fee2e2; color: #991b1b; }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 5px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .feature-list li:before {
            content: "âœ… ";
            color: #059669;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Deep Link Testing - Wittwizz Calculator</h1>
    
    <div class="test-section">
        <h2>Test Deep Links</h2>
        <p>Click these links to test the deep linking functionality:</p>
        
        <h3>Preset Links</h3>
        <a href="?pick=starter" class="test-link">Starter Package</a>
        <a href="?pick=growth" class="test-link">Growth Package</a>
        <a href="?pick=scale" class="test-link">Scale Package</a>
        
        <h3>Custom Item Links</h3>
        <a href="?pick=brand_kit,one_page_site&mode=quick" class="test-link">Brand Kit + One Page Site (Quick)</a>
        <a href="?pick=brand_kit,one_page_site,web_app&mode=advanced" class="test-link">Brand Kit + One Page Site + Web App (Advanced)</a>
        
        <h3>Mode-Only Links</h3>
        <a href="?mode=quick" class="test-link">Quick Mode Only</a>
        <a href="?mode=advanced" class="test-link">Advanced Mode Only</a>
        
        <h3>Complex Combinations</h3>
        <a href="?pick=brand_kit,one_page_site,web_app,social_media&mode=advanced" class="test-link">Full Package (Advanced)</a>
    </div>
    
    <div class="test-section">
        <h2>Expected Behavior</h2>
        <ul class="feature-list">
            <li>URL should update without page reload</li>
            <li>Calculator should load with correct preset/items selected</li>
            <li>Mode should switch to specified value</li>
            <li>No layout shift should occur</li>
            <li>Focus should remain in appropriate location</li>
            <li>Analytics events should fire in console</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Accessibility Features to Test</h2>
        <ul class="feature-list">
            <li>Screen reader announcements when copying links</li>
            <li>Visual feedback when copying links ("Link copied!")</li>
            <li>Tooltip on Share button hover/focus</li>
            <li>Proper ARIA labels and descriptions</li>
            <li>No focus loss during URL updates</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Analytics Events to Monitor</h2>
        <p>Open browser console to see these events:</p>
        <ul class="feature-list">
            <li><code>deep_link_open</code> - When deep links are opened</li>
            <li><code>link_copied</code> - When links are copied</li>
            <li><code>preset_selected</code> - When presets are selected</li>
            <li><code>item_toggled</code> - When items are added/removed</li>
            <li><code>mode_changed</code> - When mode changes</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Testing Checklist</h2>
        <div class="status info">
            <strong>Manual Testing Required:</strong><br>
            1. Click each test link above<br>
            2. Verify calculator loads correctly<br>
            3. Test copy link functionality<br>
            4. Check accessibility with screen reader<br>
            5. Monitor console for analytics events<br>
            6. Test keyboard navigation
        </div>
    </div>
    
    <div class="test-section">
        <h2>Current URL Status</h2>
        <div id="url-status" class="status info">
            Current URL: <span id="current-url"></span>
        </div>
        <div id="url-params" class="status info">
            Parameters: <span id="current-params"></span>
        </div>
    </div>
    
    <script>
        // Update URL status display
        function updateUrlStatus() {
            const currentUrl = window.location.href;
            const urlParams = new URLSearchParams(window.location.search);
            const params = Object.fromEntries(urlParams.entries());
            
            document.getElementById('current-url').textContent = currentUrl;
            document.getElementById('current-params').textContent = JSON.stringify(params, null, 2);
        }
        
        // Update on page load and URL changes
        updateUrlStatus();
        window.addEventListener('popstate', updateUrlStatus);
        
        // Monitor URL changes (for SPA navigation)
        let currentUrl = window.location.href;
        setInterval(() => {
            if (window.location.href !== currentUrl) {
                currentUrl = window.location.href;
                updateUrlStatus();
            }
        }, 100);
        
        // Add click tracking for test links
        document.querySelectorAll('.test-link').forEach(link => {
            link.addEventListener('click', (e) => {
                console.log('ðŸ§ª Test link clicked:', link.href);
                console.log('ðŸ§ª Link text:', link.textContent);
            });
        });
        
        console.log('ðŸ§ª Deep link test page loaded');
        console.log('ðŸ§ª Current URL:', window.location.href);
        console.log('ðŸ§ª URL parameters:', Object.fromEntries(new URLSearchParams(window.location.search)));
    </script>
</body>
</html>
